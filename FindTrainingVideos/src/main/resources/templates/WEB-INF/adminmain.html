<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin - Training Videos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            fetch('http://localhost:8080/adminmain/getVideoList')
                .then((response) => { return response.json();})
                .then(pdata => {
                    let tr = '';
                    console.log(pdata);
                    pdata.forEach(function (value) {
                        console.log(value);
                        tr += `<tr>
                                   <td>${value.title}</td>
                                   <td>${value.theme}</td>
                                   <td>${value.author}</td>
                                   <td>${value.date}</td>
                                   <td>${value.url}</td>
                                   <td>${value.description}</td>
                                   <td><a href="/adminmain/editvideo/${value.id}"><img src="https://img.icons8.com/ios/50/000000/edit--v1.png" width="20"/></a></td>
                                   <td><a href="/adminmain/deletevideo/${value.id}"><img src="https://img.icons8.com/windows/32/000000/delete-sign.png" width="20"/></a></td>
                               </tr>`;
                    });
                    document.querySelector('#table_id tbody:nth-child(2)').innerHTML = tr; //Append the data
                }).catch(error => {console.log(error);
            });
        });
    </script>
</head>
<body>
<div class="container">
    <nav class="navbar navbar-light bg-success justify-content-between" style="margin: 10px;">
        <a class="navbar-brand text-light" href="#">
            <img src="https://img.icons8.com/material-two-tone/24/000000/video.png" width="30" height="30" class="d-inline-block align-top" alt="">
            Training Videos - Admin
        </a>
    </nav>
    <div class="row">
        <div class="col-4 container">
            <h3 style="padding: 10px;">Add a video</h3>
            <form class="col rounded bg-light" th:object="${newVideo}" style=" padding: 10px;">
                <div class="form-group">
                    <label for="videotitle">Title</label>
                    <input type="text" name="videotitle" id="videotitle" class="form-control" th:field="*{title}">
                    <div style="color:red" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
                </div>
                <div class="form-group">
                    <label for="videotheme">Theme</label>
                    <input type="text" name="videotheme" id="videotheme" class="form-control" th:field="*{theme}">
                    <div style="color:red" th:if="${#fields.hasErrors('theme')}" th:errors="*{theme}"></div>
                </div>
                <div class="form-group">
                    <label for="videoauthor">Author</label>
                    <input type="text" name="videoauthor" id="videoauthor" class="form-control" th:field="*{author}">
                    <div style="color:red" th:if="${#fields.hasErrors('author')}" th:errors="*{author}"></div>
                </div>
                <div class="form-group">
                    <label for="videourl">URL</label>
                    <input type="text" name="videourl" id="videourl" class="form-control" th:field="*{url}">
                    <div style="color:red" th:if="${#fields.hasErrors('url')}" th:errors="*{url}"></div>
                </div>
                <div class="form-group">
                    <label for="videodescription">Description</label>
                    <input type="text" name="videodescription" id="videodescription" class="form-control" th:field="*{description}">
                    <div style="color:red" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
                </div>
                <input type="submit" value="Add" class="btn btn-success"/>
            </form>
        </div>
        <div class="col container" width="600">
            <h3 style="padding: 10px;">List</h3>
            <table class="table" id="table_id">
                <tbody>
                    <tr class="bg-light">
                        <th>Title</th>
                        <th>Theme</th>
                      <!--  <th>Discipline</th>-->
                        <th>Author</th>
                        <th>Date</th>
                        <th>URL</th>
                        <th>Description</th>
                        <th>edit</th>
                        <th>delete</th>
                    </tr>
                </tbody>
                <tbody/>
            </table>
        </div>
    </div>
</div>
</body>
</html>